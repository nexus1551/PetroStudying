***Как поставить Fail2ban для ssh на свой сервер debian/ubuntu***
-------------------------------------------------------------

**Что же такое вообще Fail2ban?**

Fail2Ban — программа для защиты серверов от брутфорса методом бана IP-адресса через фаервол.

-------------------------------------------------------------

****Алгоритм**** 

1) Обновим сервер
   
    ```apt update && apt upgrade -y```
 
2) Установим fail2ban на него

   ```apt install fail2ban -y```

3) Основаная директория будет находиться в `/etc/fail2ban/`


    - Так как основной файл `jail.conf` лучше не трогать, создадим `jail.local` и настроем его полностью
   
      `nano /etc/fail2ban/jail.local`



--------------------------------------------------------------
**/etc/fail2ban/jail.local**
```
[sshd]
enabled = true   #включаем его
port = ssh   #выбираем порт
logpath = /var/log/auth.log   #где будут находится все логи
maxretry = 3   #максимальное кол-во попыток
bantime = 7200   #время бана в секундах
bantime.increment = true   #увеличение бана при неправильном вводе
bantime.factor = 2   #во сколько раз увеличится бан
```
 -------------------------------------------------------------- 
  ``systemctl status fail2ban``
 
- Если после этого шага вылазит ошибка:

  `apt install rsyslog`

--------------------------------------------------------------
 
4) После всей настройки перезагружаем, включаем, и ставим в автозагрузку *Fail2ban*
   
    `systemctl restart fail2ban`
   
    ``systemctl enable fail2ban``
   
    ```systemctl start fail2ban```
   
  
  **Полезные команды**
  
  - ```systemctl status fail2ban```    #Просто проверяем работает ли сама служба
  - ```fail2ban-client status sshd```   #Проверяем забанненых пользователей по ssh
  - `nano /var/log/auth.log`      #Проверка логов вручную
